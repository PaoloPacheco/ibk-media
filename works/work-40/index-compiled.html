<div id="action_insert_2355306621029209">
  <style>
    :root{--primary:#05be50;--secondary:#0039a6;--blue:#2f4a9f;--light:#fbfbfb;--white:#fff;--acqua:#e5f6ed;--silver:#d9dadb;--yellow:#ff9100;--gray:#979797;--sky:#ccd7ed;--semiwhite:#f3f6fb;--skydark:#6688ca;--dark:#333;--blackrgb:#0f191e}.mk-bold{font-weight:700}.mk-semibold{font-weight:500}.mk-container{margin:0 auto;max-width:1066px;width:100%}@media (max-width:1023px){.mk-container{padding:0 24px}}.mk-ipt__text{background-color:transparent;border-color:var(--primary);border-style:solid;border-width:0 0 1px;display:block;font-size:15px;line-height:28px;width:100%}.mk-radio--btn{display:block;margin-bottom:0;position:relative}.mk-radio--btn input[type=radio]{left:0;position:absolute;top:0;visibility:hidden}.mk-radio--btn input[type=radio]~span{-webkit-box-pack:center;-ms-flex-pack:center;background-color:#fff;border-radius:16px;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;font-size:16px;justify-content:center;letter-spacing:-.5px;line-height:32px;padding:0 12px;width:100%}.mk-radio--btn input[type=radio]~span:hover{background-color:var(--yellow);color:#fff}@media (min-width:680px){.mk-radio--btn input[type=radio]~span{border-radius:20px;line-height:40px}}.mk-radio--btn input[type=radio]:checked~span{background-color:var(--yellow);color:#fff}.mkv40 *{border:none;box-sizing:border-box;margin:0;padding:0}.mkv40--overlay{background-color:rgba(0,0,0,.2);z-index:99}.mkv40--overlay,.mkv40--popup{bottom:0;height:100vh;left:0;position:fixed;right:0;top:0;width:100vw}.mkv40--popup{-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;justify-content:center;padding:16px}.mkv40--popup__close{height:16px;position:absolute;right:16px;top:16px;width:16px;z-index:10}.mkv40--popup__close:after,.mkv40--popup__close:before{background:var(--gray);border-radius:2px;content:"";cursor:pointer;display:block;height:2px;left:50%;margin-bottom:4px;position:absolute;top:0;width:20px}.mkv40--popup__close:before{transform:rotate(45deg) translate(-1px,10px)}.mkv40--popup__close:after{transform:rotate(-45deg) translate(-10px,-1px)}@media (min-width:480px){.mkv40--popup__close{right:32px;top:32px}}.mkv40--content{-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;bottom:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;justify-content:center;left:0;padding:16px;position:absolute;right:0;top:0;z-index:101}.mkv40--picture{display:none}@media (min-width:481px){.mkv40--picture{display:block}}.mkv40--wrapper{color:var(--dark);flex-direction:column;gap:24px;max-width:700px;position:relative}.mkv40--section,.mkv40--wrapper{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%}.mkv40--section{background-color:var(--white);border-radius:8px;overflow:hidden}.mkv40--grid{display:grid;width:100%}@media (min-width:481px){.mkv40--grid{grid-template-columns:320px auto}}.mkv40--header__content{-webkit-box-pack:center;-ms-flex-pack:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;flex-direction:column;height:100%;justify-content:center;padding:24px;text-align:center}@media (min-width:481px){.mkv40--header__content{align-items:flex-start;padding:64px;text-align:left}}.mkv40--body{background-color:var(--acqua)}.mkv40--body__content{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;flex-direction:column;height:100%;padding:24px;text-align:center}@media (min-width:481px){.mkv40--body__content{padding:80px 64px 48px}}.mkv40--title{color:#2f4a9f;font-family:Geometria,sans-serif;font-size:20px;font-weight:500;letter-spacing:-.4px;line-height:32px;margin-bottom:20px}@media (min-width:481px){.mkv40--title{font-size:28px;line-height:32px}}.mkv40--question__item{margin-bottom:12px}.mkv40--question__title{color:var(--blue);font-size:15px;font-weight:500;margin-bottom:16px}@media (min-width:481px){.mkv40--question__title{color:var(--dark);font-size:20px;margin-bottom:24px}}.mkv40--input{display:grid;gap:6px;grid-template-columns:28px auto}@media (min-width:481px){.mkv40--input{grid-template-columns:100%}}.mkv40--input__label{display:block;position:relative;width:100%}.mkv40--input__radio{left:0;position:absolute;top:0;visibility:hidden;z-index:-1}.mkv40--input__radio:checked+.mkv29--input__span{background-color:#cdf2dc;color:#05be50}.mkv40--input__span{-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;background-color:#eceded;border-radius:20px;color:#3c3c3c;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-family:Montserrat,sans-serif;font-size:14px;height:40px;justify-content:center;line-height:20px;padding:12px;text-align:center;transition:all .15s ease-in-out;width:100%}@media (min-width:481px){.mkv40--input__span{border-radius:39px;font-weight:600;height:58px;line-height:20px}}.mkv40--btn{-webkit-box-pack:center;-ms-flex-pack:center;background-color:var(--primary);border-radius:20px;color:var(--white);display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;font-family:Geometria;font-size:14px;font-weight:500;justify-content:center;letter-spacing:normal;line-height:40px;padding:0 28px;text-decoration:none;white-space:nowrap;width:100%}.mkv40--btn:disabled,.mkv40--btn[disabled=true],.mkv40--btn[disabled]{background-color:var(--gray);cursor:not-allowed;pointer-events:none}.mkv40--other__content{min-height:90px}.mkv40--response{width:100%}.mkv40--response__content{-webkit-box-pack:center;-ms-flex-pack:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:400px;justify-content:center}@media (min-width:481px){.mkv40--response__content{height:507px}}.mkv40--response__section{text-align:center}.mkv40--response__title{color:var(--blue);font-size:20px;font-weight:700;line-height:22px}
  </style>

  <script>
    var popupJS = (function () {
      function popupJS(options) { }

      popupJS.prototype.content = function () {
        let questions = '';
        let index = 0;

        if (options.questions.items.length) {
          questions = `<ul class="mkv40--question__list">`;
          options.questions.items.forEach((element, index) => {
            questions += `<li class="mkv40--question__item"><label for="p1_options_` + index + `" class="mk-radio--btn">
                                <input type="radio" class="mkv40--questions__radio mkv40--questions__option" id="p1_options_` + index + `" value="` + element + `" name="pregunta_1" />
                                <span>` + element + `</span>
                              </label></li>`;
          });

          if (options.questions.other) {
            questions += `<li class="mkv40--question__item"><label for="p1_options_other" class="mk-radio--btn">
                                <input type="radio" class="mkv40--questions__radio mkv40--questions__option" id="p1_options_other" value="` + options.questions.other.text + `" name="pregunta_1" />
                                <span>` + options.questions.other.text + `</span>
                              </label></li>`;
          }

          questions += `</ul>`;
        }

        const tooltipContent = `<div class="mkv40--wrapper">
          <div class="mkv40--popup__close" id="mkv40Close"></div>
          <div class="mkv40--section" id="mkv40Section">
            <div class="mkv40--grid">
              <div class="mkv40--header">
                <div class="mkv40--header__content">
                  <picture class="mkv40--picture">
                    <source
                    srcset="` + options.image + `"
                    media="(max-width: 480px)">
                    <img class="mkv40--image"
                      src="` + options.image2x + `"
                      alt="Tenemos nuevo módulo de pago de créditos" width="303">
                  </picture>
                  <h2 class="mkv40--title">` + options.title + `</h2>
                  <p class="mkv40--excerpt">` + options.excerpt + `</p>
                </div>
              </div>
              <div class="mkv40--body">
                <div class="mkv40--body__content">
                  <div class="mkv40--body__header">
                    <h4 class="mkv40--question__title">` + options.questions.question + `</h4>
                  </div>
                  <div class="mkv40--body__body">
                    <div class="mkv40--body__section">` + questions + `</div>
                    <div class="mkv40--other__content" id="otherContent"></div>
                  </div>
                  <div class="mkv40--body__footer">
                    <button class="mkv40--btn" id="mkv40Btn" type="button" disabled>` + options.questions.btnText + `</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>`;

        return tooltipContent;
      }

      popupJS.prototype.button = function () {
        const content = this.content();
        const button = document.createElement('div');
        const overlayDiv = document.createElement('div');

        overlayDiv.classList.add('mkv40--overlay');
        overlayDiv.setAttribute('id', 'mkv40Overlay');
        button.classList.add('mkv40--content');
        button.setAttribute('id', 'mkv40Button');

        document.body.appendChild(overlayDiv);

        button.innerHTML = content;

        document.body.appendChild(button);
        this.eventSelectOptions();
        this.eventDisplayPopup();
        this.closePopup();
      };

      popupJS.prototype.inputText = function () {
        otherIpt = `<input type="text" class="mk-ipt__text" name="mkv40--description" id="mkv40--other__text" placeholder="Ingresa el motivo " />`;

        return otherIpt;
      }

      popupJS.prototype.response = function () {
        response = `<div class="mkv40--response">
          <div class="mkv40--response__content">
            <div class="mkv40--response__section">
              <picture>
                <source
                srcset="` + options.response.imageResponse + `"
                media="(max-width: 480px)">
                <img class="mkv40--image"
                  src="` + options.response.imageResponse2x + `"
                  alt="Tenemos nuevo módulo de pago de créditos" width="184">
              </picture>
              <h4 class="mkv40--response__title">` + options.response.title + `</h4>
            </div>
          </div>
        </div>`;

        return response;
      }

      popupJS.prototype.eventSelectOptions = function () {
        const matches = document.querySelectorAll('.mkv40--questions__option');
        const iptContent = document.getElementById('otherContent');
        const inputText = this.inputText();
        const self = this;

        matches.forEach(match => {
          match.onchange = function (el) { // Evento de selección de una opción.
            let elValue = el.target.value; // Valor de la opción.

            console.log('Opción elegida: ', elValue);

            if (elValue == 'Otro motivo') {
              iptContent.innerHTML = inputText;
              self.toggleButton(false, elValue);
            } else {
              self.toggleButton(true, elValue);
              iptContent.innerHTML = '';
            }
          }
        });
      }

      popupJS.prototype.closePopup = function () {
        const mkv40Close = document.getElementById('mkv40Close');
        const popup = document.getElementById('mkv40Button');
        const overlay = document.getElementById('mkv40Overlay');
        const self = this;

        mkv40Close.onclick = function () {
          overlay.remove();
          popup.remove();
          self.eventClosePopup();
        }
      }

      popupJS.prototype.toggleButton = function (status, value) {
        const mkv40Section = document.getElementById('mkv40Section');
        const button = document.getElementById('mkv40Btn');
        const inputOtherText = document.getElementById('mkv40--other__text');
        let reason = '';
        const self = this;

        if (status === true) {
          button.removeAttribute("disabled")
        } else {
          button.setAttribute('disabled', true);

          inputOtherText.addEventListener("keyup", (el) => {
            if (el.target.value.length > 0) {
              button.removeAttribute("disabled");
              reason = el.target.value;
            } else {
              button.setAttribute('disabled', true);
            }
          });
        }

        button.onclick = function () {
          mkv40Section.innerHTML = self.response();
          console.log(`Valor elegido: `, value);

          if (reason !== '') {
            console.log(`Valor si es "Otro motivo": `, reason);
          }
        }
      }

      popupJS.prototype.eventDisplayPopup = function () {
        console.log(`Evento despliegue del popup`);
      }

      popupJS.prototype.eventClosePopup = function () {
        console.log(`Evento cierre del popup`);
      }

      popupJS.prototype.eventClickButton = function () {
        console.log(`Evento click en el botón`);
      }

      return popupJS;
    }());

    var options = {
      title: '¿Qué pasó?',
      excerpt: 'Notamos que saliste del módulo de cambio y nos gustaría conocer la razón:',
      image: 'https://paolopacheco.github.io/ibk-media/images/que-paso.png',
      image2x: 'https://paolopacheco.github.io/ibk-media/images/que-paso.png',
      button: {
        active: true, // Habilitación del botón.
        text: 'Empezar',
        url: 'https://google.com'
      },
      response: {
        title: '¡Gracias por tu<br> respuesta!',
        imageResponse: 'https://paolopacheco.github.io/ibk-media/images/gracias-por-tu-respuesta.png',
        imageResponse2x: 'https://paolopacheco.github.io/ibk-media/images/gracias-por-tu-respuesta.png',
      },
      timer: {
        enable: false,
        time: '5s', // Duración del la barra de progreso.
        url: '#',
      },
      questions: {
        question: '¿Por qué no continuaste la operación de cambio de moneda?', // Pregunta
        other: {
          enable: true,
          text: 'Otro motivo',
        },
        items: [ // Opciones de respuestas.
          'Solo estaba simulando',
          'Tengo un mejor tipo de cambio',
        ],
        btnText: 'Enviar',
      }
    };

    var popup = new popupJS(options);

    (function () {
      popup.button();
    })();
  </script>
</div>